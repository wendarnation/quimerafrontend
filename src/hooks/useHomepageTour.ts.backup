import { useEffect, useRef } from 'react';
import { driver } from 'driver.js';

export const useHomepageTour = () => {
  const driverRef = useRef<any>(null);

  useEffect(() => {
    // Inicializar driver.js - VersiÃ³n actualizada
    driverRef.current = driver({
      showProgress: true,
      stagePadding: 4,
      stageRadius: 10,
      allowClose: true,
      overlayColor: 'black',
      overlayOpacity: 0.7,
      smoothScroll: true,
      showButtons: ['next', 'previous', 'close'],
      nextBtnText: 'Siguiente â†’',
      prevBtnText: 'â† Anterior',
      doneBtnText: 'âœ• Cerrar',
      popoverClass: 'driverjs-theme',
      steps: [
        {
          element: '[data-tour="search-bar"]',
          popover: {
            title: 'ðŸ” Barra de BÃºsqueda',
            description: 'AquÃ­ puedes buscar sneakers por marca, modelo o SKU. Â¡Prueba escribiendo "Jordan", "Nike" o cualquier modelo que te interese!',
            side: 'bottom',
            align: 'center'
          }
        },
        {
          element: '[data-tour="nav-news"]',
          popover: {
            title: 'ðŸ“° Noticias',
            description: 'Mantente al dÃ­a con las Ãºltimas noticias del mundo de las sneakers, lanzamientos y tendencias.',
            side: 'bottom',
            align: 'center'
          }
        },
        {
          element: '[data-tour="nav-about"]',
          popover: {
            title: 'ðŸŽ¯ Acerca de',
            description: 'Conoce nuestra misiÃ³n de democratizar el acceso a las sneakers y descubre quÃ© nos motiva.',
            side: 'bottom',
            align: 'center'
          }
        },
        {
          element: '[data-tour="nav-contact"]',
          popover: {
            title: 'ðŸ“§ Contacta',
            description: 'Â¿Tienes alguna pregunta o sugerencia? ContÃ¡ctanos a travÃ©s de esta secciÃ³n.',
            side: 'bottom',
            align: 'center'
          }
        },
        {
          element: '[data-tour="user-section"]',
          popover: {
            title: 'ðŸ‘¤ SecciÃ³n de Usuario',
            description: 'AquÃ­ puedes acceder a tus favoritos, configuraciÃ³n de perfil y todas las funciones personalizadas de tu cuenta.',
            side: 'bottom',
            align: 'center'
          }
        },
        {
          element: '[data-tour="trending-section"]',
          popover: {
            title: 'ðŸ”¥ Novedades',
            description: 'Las sneakers mÃ¡s recientes y en tendencia. Desliza para ver mÃ¡s modelos o haz clic en "Ver todas" para explorar todo nuestro catÃ¡logo.',
            side: 'top',
            align: 'center'
          }
        },
        {
          element: '[data-tour="recommended-section"]',
          popover: {
            title: 'â­ Recomendaciones',
            description: 'Sneakers seleccionadas especialmente para ti basadas en tendencias y popularidad. Â¡Encuentra tu prÃ³ximo par favorito!',
            side: 'top',
            align: 'center'
          }
        },
        {
          element: '[data-tour="featured-images"]',
          popover: {
            title: 'ðŸŽ¨ Colecciones Destacadas',
            description: 'Explora nuestras colecciones especiales por marca. Cada imagen te llevarÃ¡ a una selecciÃ³n curada de esa marca especÃ­fica.',
            side: 'top',
            align: 'center'
          }
        }
      ]
    });

    return () => {
      if (driverRef.current) {
        driverRef.current.destroy();
      }
    };
  }, []);

  const startTour = () => {
    if (driverRef.current) {
      driverRef.current.drive();
    }
  };

  return { startTour };
};
